#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                yPARSE.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include private header               yPARSE_priv.h               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (BASE) verify readiness locking                                    0s   locking                                                                                      ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare some things for quick testing                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        yparse__unit_quiet                                                                                                                i_equal     0                                                                                                    
     code     create a input file                  - - - - - - - - - - - - -   system ("echo  \"test Д 15 Д 3.14159 Д a Д stringy thing Д\"   > /tmp/yPARSE_in.txt");                                                                                                                                     
     local    create return/working variables      - - - - - - - - - - - - -   char    t   [LEN_LABEL] = "";                                                                                                                                                                                              
     local    create return/working variables      - - - - - - - - - - - - -   int     a   = 0;                                                                                                                                                                                                           
     local    create return/working variables      - - - - - - - - - - - - -   double  b   = 0.0;                                                                                                                                                                                                         
     local    create return/working variables      - - - - - - - - - - - - -   char    c   = '-';                                                                                                                                                                                                         

   COND       check before any actions                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : -  -  иии  -   т-                   Т  т-                   Т  field                     

   COND       attempt basic inputs                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      open an input file                   yPARSE_open_in              "/tmp/yPARSE_in.txt"                                                                                  i_lesser    0                                                                                                    
     get      read a record                        yPARSE_read_one             NULL        , NULL                                                                                    i_lesser    0                                                                                                    
     get      ... pop a string                     yPARSE_popstr               t                                                                                                     i_lesser    0                                                                                                    
     get      ... pop an integer                   yPARSE_popint               &a                                                                                                    i_lesser    0                                                                                                    
     get      ... pop a double                     yPARSE_popdouble            &b                                                                                                    i_lesser    0                                                                                                    
     get      ... pop a char                       yPARSE_popchar              &c                                                                                                    i_lesser    0                                                                                                    
     get      ... toss a field                     yPARSE_toss                                                                                                                       i_lesser    0                                                                                                    

   COND       attempt basic outputs                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      open an output file                  yPARSE_open_out             "/tmp/yPARSE_out.txt"           , "test.c"          , "just a sample"                                 i_lesser    0                                                                                                    
     get      ... push a string                    yPARSE_pushstr              t                                                                                                     i_lesser    0                                                                                                    
     get      ... push an integer                  yPARSE_pushint              a                                                                                                     i_lesser    0                                                                                                    
     get      ... push a double                    yPARSE_pushfloat            b                                                                                                     i_lesser    0                                                                                                    
     get      ... push a char                      yPARSE_pushchar             c                                                                                                     i_lesser    0                                                                                                    
     get      ... push an empty                    yPARSE_pushempty                                                                                                                  i_lesser    0                                                                                                    
     get      write a record                       yPARSE_write                NULL        , NULL                                                                                    i_lesser    0                                                                                                    

   COND       do a simple initialization                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     simple init                          yPARSE_simple               "/tmp/yPARSE_in.txt"     , "/tmp/yPARSE_out.txt"                                                      i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : y  -  иии  -   т/tmp/yPARSE_in.txt  Т  т/tmp/yPARSE_out.txt Т  field                     

   COND       attempt basic inputs                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      read a record                        yPARSE_read_one             NULL        , NULL                                                                                    i_equal     5                                                                                                    
     get      ... pop an integer                   yPARSE_popint               &a                                                                                                    i_equal     0                                                                                                    
     echo     ... check contents                   - - - - - - - - - - - - -   a                                                                                                     i_equal     15                                                                                                   
     get      ... pop a double                     yPARSE_popdouble            &b                                                                                                    i_equal     0                                                                                                    
     echo     ... check contents                   - - - - - - - - - - - - -   b                                                                                                     i_equal     3.14159                                                                                              
     get      ... pop a char                       yPARSE_popchar              &c                                                                                                    i_equal     0                                                                                                    
     echo     ... check contents                   - - - - - - - - - - - - -   c                                                                                                     i_equal     'a'                                                                                                  
     get      ... toss a field                     yPARSE_toss                                                                                                                       i_equal     0                                                                                                    

   COND       attempt basic outputs before handler                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... push a verb                      yPARSE_pushverb             "test"                                                                                                i_lesser    0                                                                                                    
     get      ... push a string                    yPARSE_pushstr              t                                                                                                     i_lesser    0                                                                                                    
     get      ... push an integer                  yPARSE_pushint              a                                                                                                     i_lesser    0                                                                                                    
     get      ... push a double                    yPARSE_pushfloat            b                                                                                                     i_lesser    0                                                                                                    
     get      ... push a char                      yPARSE_pushchar             c                                                                                                     i_lesser    0                                                                                                    
     get      ... push an empty                    yPARSE_pushempty                                                                                                                  i_lesser    0                                                                                                    
     get      write a record                       yPARSE_write                NULL        , NULL                                                                                    i_lesser    0                                                                                                    

   COND       create a handler                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call handler addition                yPARSE_handler              "test"      , "ifcO"        , yparse__unit_verb                                                       i_equal     0                                                                                                    

   COND       attempt basic outputs                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... push a verb                      yPARSE_pushverb             "test"                                                                                                i_equal     0                                                                                                    
     get      ... push an integer                  yPARSE_pushint              a                                                                                                     i_equal     0                                                                                                    
     get      ... push a double                    yPARSE_pushfloat            b                                                                                                     i_equal     0                                                                                                    
     get      ... push a char                      yPARSE_pushchar             c                                                                                                     i_equal     0                                                                                                    
     get      ... push an empty                    yPARSE_pushempty                                                                                                                  i_equal     0                                                                                                    
     get      write a record                       yPARSE_write                NULL        , NULL                                                                                    i_equal     0                                                                                                    

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         yparse__unit_end                                                                                                                  i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (BASE) verify configuration                                        0s   config          yPARSE_config, yPARSE_wrap                                                   ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare some things for quick testing                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        yparse__unit_quiet                                                                                                                i_equal     0                                                                                                    

   COND       verify setting full automatic                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear with wrap                      yPARSE_wrap                                                                                                                       i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : -  -  иии  -   т-                   Т  т-                   Т  иииии                     
     exec     call init                            yPARSE_config               YPARSE_AUTO   , yparse__unit_verber       , YPARSE_REUSING   , YPARSE_FIELD    , YPARSE_FILL          i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : y  y  SET  y   т-                   Т  т-                   Т  field                     

   COND       verify setting manual                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear with wrap                      yPARSE_wrap                                                                                                                       i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : -  -  иии  -   т-                   Т  т-                   Т  иииии                     
     exec     call init                            yPARSE_config               YPARSE_MANUAL , yparse__unit_verber       , YPARSE_REUSING   , YPARSE_FIELD    , YPARSE_FILL          i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : y  -  SET  y   т-                   Т  т-                   Т  field                     

   COND       verify turning off reuse                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear with wrap                      yPARSE_wrap                                                                                                                       i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : -  -  иии  -   т-                   Т  т-                   Т  иииии                     
     exec     call init                            yPARSE_config               YPARSE_MANUAL , yparse__unit_verber       , YPARSE_ONETIME   , YPARSE_FIELD    , YPARSE_FILL          i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : y  -  SET  -   т-                   Т  т-                   Т  field                     

   COND       verify setting to auto with no verber                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear with wrap                      yPARSE_wrap                                                                                                                       i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : -  -  иии  -   т-                   Т  т-                   Т  иииии                     
     exec     call init                            yPARSE_config               YPARSE_AUTO   , NULL                      , YPARSE_ONETIME   , YPARSE_FIELD    , YPARSE_FILL          i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : y  y  иии  -   т-                   Т  т-                   Т  field                     

   COND       verify changing delimiters                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear with wrap                      yPARSE_wrap                                                                                                                       i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : -  -  иии  -   т-                   Т  т-                   Т  иииии                     
     exec     call init                            yPARSE_config               YPARSE_AUTO   , NULL                      , YPARSE_ONETIME   , YPARSE_FUNCTION , YPARSE_FILL          i_equal     0                                                                                                    
     get      ... check ready                      yparse_base__unit           "ready"          , 0                                                                                  s_equal     BASE ready     : y  y  иии  -   т-                   Т  т-                   Т  function                  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         yparse__unit_end                                                                                                                  i_equal     0                                                                                                    





# end-of-file.  done, finito, completare, whimper [¤┤иии
